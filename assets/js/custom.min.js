"use strict";var stations,sensors,sensorData,quality,select=document.querySelector(".select"),stationName=document.querySelector(".data__name"),createSelect=function(e){e.forEach(function(e){var t=document.createElement("option");t.text=e.stationName,t.value=e.id,select.add(t)})},loadSelectValue=function(){null!=localStorage.getItem("station")?select.value=localStorage.getItem("station"):select.value=129,localStorage.setItem("station",select.value)},loadSensorData=function(e){var t=new FormData;t.append("id",e),fetch("inc/sensor-data.php",{method:"POST",body:t}).then(function(e){return e.text()}).then(function(e){sensorData=JSON.parse(e)}).catch(function(e){return console.log(e)})},loadSensors=function(){var e=new FormData;e.append("id",select.value),fetch("inc/sensors.php",{method:"POST",body:e}).then(function(e){return e.text()}).then(function(e){(sensors=JSON.parse(e)).forEach(function(e){loadSensorData(e.id)})}).catch(function(e){return console.log(e)})},loadQuality=function(){var e=new FormData;e.append("id",select.value),fetch("inc/quality.php",{method:"POST",body:e}).then(function(e){return e.text()}).then(function(e){quality=JSON.parse(e),document.querySelector(".js-date").innerText=quality.stCalcDate,document.querySelector(".js-quality").innerText=quality.stIndexLevel.indexLevelName}).catch(function(e){return console.log(e)})};fetch("inc/stations.php",{method:"GET"}).then(function(e){return e.text()}).then(function(e){stations=JSON.parse(e),createSelect(stations),loadSelectValue(),loadSensors(),loadQuality()}).catch(function(e){return console.log(e)}),select.addEventListener("change",function(){loadSensors(),loadQuality()});